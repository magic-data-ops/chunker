<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eval Category Gap Analysis Dashboard v2</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background: #f5f6f8;
    color: #1a1a2e;
  }

  header {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    color: white;
    padding: 28px 40px 20px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.15);
  }

  header h1 {
    font-size: 26px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  header p {
    margin-top: 6px;
    font-size: 14px;
    color: rgba(255,255,255,0.7);
  }

  .tab-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    background: #fff;
    border-bottom: 2px solid #e0e3e8;
    padding: 0 24px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }

  .tab-btn {
    padding: 14px 20px;
    font-size: 13px;
    font-weight: 500;
    color: #555;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .tab-btn:hover {
    color: #0f3460;
    background: #f0f4ff;
  }

  .tab-btn.active {
    color: #0f3460;
    border-bottom-color: #0f3460;
    font-weight: 600;
  }

  .tab-content {
    display: none;
    padding: 24px;
  }

  .tab-content.active {
    display: block;
  }

  .plot-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 1px 8px rgba(0,0,0,0.08);
    overflow: hidden;
  }

  .plot-header {
    padding: 20px 28px;
    border-bottom: 1px solid #eee;
  }

  .plot-header h2 {
    font-size: 18px;
    font-weight: 600;
    color: #1a1a2e;
  }

  .plot-header p {
    margin-top: 6px;
    font-size: 13px;
    color: #666;
    line-height: 1.5;
  }

  .plot-header .tag {
    display: inline-block;
    margin-top: 8px;
    padding: 3px 10px;
    font-size: 11px;
    font-weight: 600;
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .tag.cluster-map { background: #e3f2fd; color: #1565c0; }
  .tag.gap-analysis { background: #fce4ec; color: #c62828; }
  .tag.heatmap { background: #fff3e0; color: #e65100; }

  .plot-frame {
    width: 100%;
    height: 55vh;
    border: none;
  }

  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    gap: 20px;
    padding: 24px;
  }

  .overview-card {
    background: #fff;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 1px 8px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.2s ease;
    border-left: 4px solid #0f3460;
  }

  .overview-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
  }

  .overview-card h3 {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 6px;
  }

  .overview-card p {
    font-size: 13px;
    color: #666;
    line-height: 1.5;
  }

  .overview-card .tag { margin-top: 10px; }

  footer {
    text-align: center;
    padding: 24px;
    font-size: 12px;
    color: #999;
  }

  /* Findings tab styles */
  .findings {
    max-width: 1100px;
    margin: 0 auto;
  }

  .findings-section {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 1px 8px rgba(0,0,0,0.08);
    margin-bottom: 24px;
    overflow: hidden;
  }

  .findings-section h2 {
    font-size: 17px;
    font-weight: 600;
    padding: 18px 24px;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .findings-section .section-body {
    padding: 20px 24px;
  }

  .findings-section p {
    font-size: 13px;
    color: #555;
    line-height: 1.6;
    margin-bottom: 12px;
  }

  .findings-section p:last-child { margin-bottom: 0; }

  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    margin-top: 8px;
  }

  .data-table th {
    text-align: left;
    padding: 10px 14px;
    background: #f5f6f8;
    font-weight: 600;
    color: #333;
    border-bottom: 2px solid #e0e3e8;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }

  .data-table td {
    padding: 9px 14px;
    border-bottom: 1px solid #f0f0f0;
    color: #444;
    vertical-align: top;
  }

  .data-table tr:hover { background: #fafbfc; }

  .data-table .num { font-family: 'SF Mono', Monaco, Consolas, monospace; font-size: 12px; }
  .data-table .cat-label {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
    background: #e8eaf6;
    color: #283593;
  }

  .severity-high { color: #c62828; font-weight: 600; }
  .severity-med { color: #e65100; font-weight: 500; }
  .severity-low { color: #2e7d32; }

  .callout {
    border-left: 4px solid;
    padding: 14px 18px;
    border-radius: 0 8px 8px 0;
    margin: 12px 0;
    font-size: 13px;
    line-height: 1.6;
  }

  .callout.red { border-color: #c62828; background: #fef2f2; color: #7f1d1d; }
  .callout.orange { border-color: #e65100; background: #fff7ed; color: #7c2d12; }
  .callout.blue { border-color: #1565c0; background: #eff6ff; color: #1e3a5f; }
  .callout.green { border-color: #2e7d32; background: #f0fdf4; color: #14532d; }

  .metric-row {
    display: flex;
    gap: 16px;
    margin: 12px 0;
    flex-wrap: wrap;
  }

  .metric-box {
    flex: 1;
    min-width: 160px;
    background: #f8f9fb;
    border-radius: 8px;
    padding: 16px;
    text-align: center;
  }

  .metric-box .value {
    font-size: 28px;
    font-weight: 700;
    color: #1a1a2e;
  }

  .metric-box .label {
    font-size: 11px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 4px;
  }
</style>
</head>
<body>

<header>
  <h1>Eval Category Gap Analysis Dashboard</h1>
  <p>627 eval sets across 16 categories &mdash; Semantic embeddings (all-mpnet-base-v2) &mdash; Generated 2026-02-25</p>
</header>

<div class="tab-bar">
  <button class="tab-btn active" onclick="showTab('overview')">Overview</button>
  <button class="tab-btn" onclick="showTab('density')">Density Map</button>
  <button class="tab-btn" onclick="showTab('boundaries')">Boundary Gaps</button>
  <button class="tab-btn" onclick="showTab('size-breadth')">Size vs Breadth</button>
  <button class="tab-btn" onclick="showTab('coherence')">Coherence</button>
  <button class="tab-btn" onclick="showTab('redundancy')">Redundancy Network</button>
  <button class="tab-btn" onclick="showTab('isolation')">Isolation</button>
  <button class="tab-btn" onclick="showTab('tsne')">Cluster Map (t-SNE)</button>
  <button class="tab-btn" onclick="showTab('heatmap')">Similarity Heatmap</button>
</div>

<!-- Overview Tab -->
<div id="tab-overview" class="tab-content active">
  <div class="overview-grid">

    <div class="overview-card" onclick="showTab('density')" style="border-left-color: #c62828;">
      <h3>Coverage Density Map</h3>
      <p>KDE contour over t-SNE reveals where in semantic space coverage is thin. Cold/white zones are gaps &mdash; topics no eval set covers.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
      <span class="tag cluster-map">Cluster Map</span>
    </div>

    <div class="overview-card" onclick="showTab('boundaries')" style="border-left-color: #c62828;">
      <h3>Boundary Gap Map</h3>
      <p>Diamond markers between category centroids sized by gap distance. Large red diamonds = missing coverage between two existing categories.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
      <span class="tag cluster-map">Cluster Map</span>
    </div>

    <div class="overview-card" onclick="showTab('size-breadth')" style="border-left-color: #e65100;">
      <h3>Size vs Semantic Breadth</h3>
      <p>Quadrant chart: top-left = broad topics with too few evals (biggest gaps). Top-right = overloaded categories to split.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>

    <div class="overview-card" onclick="showTab('coherence')" style="border-left-color: #e65100;">
      <h3>Category Coherence</h3>
      <p>Dumbbell chart showing min/mean/max similarity within each category. Wide spread = incoherent category that should be split.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>

    <div class="overview-card" onclick="showTab('redundancy')" style="border-left-color: #e65100;">
      <h3>Redundancy Network</h3>
      <p>Node-link graph of categories. Thick edges = high semantic overlap between categories. Identifies where eval budget is spent on duplicate ground.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>

    <div class="overview-card" onclick="showTab('isolation')" style="border-left-color: #e65100;">
      <h3>Item Isolation</h3>
      <p>Top 30 most isolated individual eval sets. These are orphaned items that don't fit their category or represent under-covered niches.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>

    <div class="overview-card" onclick="showTab('tsne')" style="border-left-color: #1565c0;">
      <h3>Cluster Map (t-SNE)</h3>
      <p>Interactive semantic t-SNE scatter with all 627 eval sets. Hover any point to see its description and category.</p>
      <span class="tag cluster-map">Cluster Map</span>
    </div>

    <div class="overview-card" onclick="showTab('heatmap')" style="border-left-color: #1565c0;">
      <h3>Similarity Heatmap</h3>
      <p>16&times;16 inter-category cosine similarity matrix, hierarchically ordered. Shows which categories are most/least related.</p>
      <span class="tag heatmap">Heatmap</span>
    </div>

  </div>
</div>

<!-- Plot Tabs -->
<div id="tab-density" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Coverage Density Cluster Map</h2>
      <p>KDE contour over t-SNE coordinates. White/yellow = sparse (gaps in coverage). Red = dense. X markers show the sparsest zones &mdash; hover for details on what's nearby.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
      <span class="tag cluster-map">Cluster Map</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_density.html"></iframe>
  </div>
</div>

<div id="tab-boundaries" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Boundary Gap Cluster Map</h2>
      <p>Diamond markers placed at midpoints between every pair of category centroids. Larger, redder diamonds = bigger gaps. Hover to see which categories and the nearest eval set from each side.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
      <span class="tag cluster-map">Cluster Map</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_boundaries.html"></iframe>
  </div>
</div>

<div id="tab-size-breadth" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Category Size vs Semantic Breadth</h2>
      <p>Each category plotted by eval count (x) vs semantic breadth (y). Top-left red quadrant = under-invested broad topics (biggest gaps). Top-right orange = overloaded, consider splitting. Bottom-right green = well-covered.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_size_breadth.html"></iframe>
  </div>
</div>

<div id="tab-coherence" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Category Coherence Dumbbell</h2>
      <p>For each category: the range from least to most similar internal pair. Wide bars (red) = incoherent categories that mix unrelated eval sets. Hover endpoints to see the specific pair.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_coherence.html"></iframe>
  </div>
</div>

<div id="tab-redundancy" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Category Redundancy Network</h2>
      <p>Nodes = categories (sized by eval count), edges where cross-category similarity exceeds threshold. Thick red edges = redundant overlap. Hover edges to see the most similar cross-category eval pair.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_redundancy.html"></iframe>
  </div>
</div>

<div id="tab-isolation" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Item Isolation Lollipop</h2>
      <p>Top 30 most isolated eval sets ranked by how dissimilar they are from their own category peers. Hover to see their 3 nearest neighbors across all categories &mdash; reveals potential misclassifications.</p>
      <span class="tag gap-analysis">Gap Analysis</span>
    </div>
    <iframe class="plot-frame" data-src="eval_gap_isolation.html"></iframe>
  </div>
</div>

<div id="tab-tsne" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Semantic Cluster Map (t-SNE)</h2>
      <p>All 201 eval sets projected to 2D via t-SNE on sentence embeddings. Colored by category. Hover any point for full eval set description.</p>
      <span class="tag cluster-map">Cluster Map</span>
    </div>
    <iframe class="plot-frame" data-src="eval_semantic_tsne_interactive.html"></iframe>
  </div>
</div>

<div id="tab-heatmap" class="tab-content">
  <div class="plot-card">
    <div class="plot-header">
      <h2>Inter-Category Similarity Heatmap</h2>
      <p>16&times;16 average cosine similarity between categories, hierarchically ordered. Raw values shown in cells. Darker = more similar.</p>
      <span class="tag heatmap">Heatmap</span>
    </div>
    <iframe class="plot-frame" data-src="eval_semantic_heatmap_interactive.html"></iframe>
  </div>
</div>

<footer>
  Eval Category Gap Analysis &mdash; Sentence Embeddings (all-mpnet-base-v2) &mdash; 627 eval sets, 16 categories
</footer>

<script>
  function showTab(tabId) {
    // Hide all tabs, deactivate all buttons
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

    // Activate selected tab
    const tab = document.getElementById('tab-' + tabId);
    tab.classList.add('active');

    // Activate corresponding button
    const buttons = document.querySelectorAll('.tab-btn');
    const tabNames = ['overview','density','boundaries','size-breadth','coherence','redundancy','isolation','tsne','heatmap'];
    const idx = tabNames.indexOf(tabId);
    if (idx >= 0 && buttons[idx]) buttons[idx].classList.add('active');

    // Lazy-load iframe src on first visit
    const iframe = tab.querySelector('iframe[data-src]');
    if (iframe && !iframe.src) {
      iframe.src = iframe.getAttribute('data-src');
    }
  }
</script>

</body>
</html>
